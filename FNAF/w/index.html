<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="HandheldFriendly" content="true" />
    <title>Five Nights at Freddy's World</title>

	    <script>
        // Change title and icon after 3.5s
        setTimeout(function() {
            document.title = "Home | Schoology";
            document.querySelector("link[rel='icon']").href = "https://i.ibb.co/NY8yC9c/download-1.png";
        }, 3500);

        function toggleBlank() {
            const toggle = document.getElementById('Blank').checked;
            document.cookie = "Blank=" + toggle + "; path=/";
        }

        // Toggle generic cookie
        function Cookie() {
            const currentState = document.cookie.includes('=on');
            document.cookie = `=${currentState ? 'off' : 'on'}; path=/`;
            alert(` is now ${currentState ? 'off' : 'on'}`);
        }

        // Window load: initialize cookies
        window.onload = function() {
            const cookies = document.cookie.split(';');
            let userKey = '';
            let userLink = '';
            
            cookies.forEach(cookie => {
                const [name, value] = cookie.trim().split('=');

                if (name === 'warningEnabled') {
                    document.getElementById('warning').checked = (value === 'true');
                }
                if (name === 'userKey') {
                    userKey = value;
                }
                if (name === 'userLink') {
                    userLink = value;
                }
            });

            // Panic key functionality
            document.addEventListener('keydown', function(event) {
                if (event.key === userKey) {
                    window.open(userLink, "_blank");
                }
            });
        };

        // Warn on page unload
        window.onbeforeunload = function() {
            const cookies = document.cookie.split(';');
            let warningEnabled = false;
            cookies.forEach(cookie => {
                const [name, value] = cookie.trim().split('=');
                if (name === 'warningEnabled') {
                    warningEnabled = (value === 'true');
                }
            });
            if (warningEnabled) {
                return "Are you sure you want to leave this page?";
            }
        };
		</script>
</head>

<body>
    <div style="display: inline-block; -webkit-user-select: none; text-align: left">
        <canvas id="MMFCanvas" width="1280" height="720"> Your browser does not support Canvas, Please try again. </canvas>
    </div>
    <div id="progress-container">
        <div style="margin-bottom: 6px;">Downloading... <span id="download-text">0%</span></div>
        <div style="width: 100%; background: #444; border-radius: 6px; overflow: hidden;">
            <div id="download-bar" style="height: 10px; background: #3b82f6; width: 0%; transition: width 0.2s;"></div>
        </div>
        <div style="margin: 12px 0 6px;">Extracting... <span id="extract-text">0%</span></div>
        <div style="width: 100%; background: #444; border-radius: 6px; overflow: hidden;">
            <div id="extract-bar" style="height: 10px; background: #10b981; width: 0%; transition: width 0.2s;"></div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="main.js"></script>
</body>

</html>
