<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <script>
    setTimeout(function() {
        document.title = "Home | Schoology";
        document.querySelector("link[rel='icon']").href = "https://i.ibb.co/NY8yC9c/download-1.png";
    }, 3500);
  </script>
  
  <script>
    window.onbeforeunload = function() {
        const cookies = document.cookie.split(';');
        let warningEnabled = false;
        cookies.forEach(cookie => {
            const [name, value] = cookie.trim().split('=');
            if (name === 'warningEnabled') {
                warningEnabled = (value === 'true');
            }
        });
        if (warningEnabled) {
            return "Are you sure you want to leave this page?";
        }
    };
  </script>
  
  <script>
    window.onload = function() {
        const cookies = document.cookie.split(';');
        let userKey = '';
        let userLink = '';
        
        cookies.forEach(cookie => {
            if (cookie.trim().startsWith('userKey=')) {
                userKey = cookie.split('=')[1];
            }
            if (cookie.trim().startsWith('userLink=')) {
                userLink = cookie.split('=')[1];
            }
        });

        document.addEventListener('keydown', function(event) {
            if (event.key === userKey) {
                window.open(userLink, "_blank");
            }
        });
    };
  </script>
</head>

<body>
  <div class="logo-container">
    <img src="logo.png" alt="Logo" class="logo">
  </div>
  
  <div class="menu">
    <a>NOTE: To fix the screen being stretched, press F4 (or on Chromebook, hold the search key and press the fullscreen button, which is the fourth key to the right of the ESC key)</a>

    <!-- NORMAL LINKS NOW -->
    <a href="chapter1" class="row">
      <span class="chapter">Chapter 1</span>
      <span class="title">The Beginning</span>
      <img src="icons/1.png">
    </a>

    <a href="chapter2" class="row">
      <span class="chapter">Chapter 2</span>
      <span class="title">A Cyber's World</span>
      <img src="icons/2.png">
    </a>

    <a href="chapter3" class="row">
      <span class="chapter">Chapter 3</span>
      <span class="title">Late Night</span>
      <img src="icons/3.png">
    </a>

    <a href="chapter4" class="row">
      <span class="chapter">Chapter 4</span>
      <span class="title">Prophecy</span>
      <img src="icons/4.png">
    </a>

    <a href="#" onclick="alert('Chapter 5 coming soon!')" class="disabled-row">
      <span class="chapter">Chapter 5</span>
      <span class="disabled-title">--</span>
      <img src="icons/0.png">
    </a>

    <a href="#" onclick="alert('Chapter 6 coming soon!')" class="disabled-row">
      <span class="chapter">Chapter 6</span>
      <span class="disabled-title">--</span>
      <img src="icons/0.png">
    </a>

    <a href="#" onclick="alert('Chapter 7 coming soon!')" class="disabled-row">
      <span class="chapter">Chapter 7</span>
      <span class="disabled-title">--</span>
      <img src="icons/0.png">
    </a>
  </div>

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-WLTG1S4STB');
  </script>

  <audio id="drone" controls loop autoplay hidden>
    <source src="audios/AUDIO_DRONE.ogg" type="audio/ogg">
    Your browser does not support the audio element.
  </audio>
  <button id="mute">ðŸ”Š</button>
  
  <script>
    const audio = document.getElementById('drone');
    const mute = document.getElementById('mute');
  
    mute.addEventListener('click', () => {
      audio.muted = !audio.muted;
      updateButton(); 
    });
  
    function updateButton() {
      mute.textContent = audio.muted ? 'ðŸ”Š' : 'ðŸ”‡';
    }
  
    updateButton();

    const menumoveaudio = new Audio('audios/snd_menumove.mp3');
    const menuselectaudio = new Audio('audios/snd_select.mp3');
    
    document.querySelectorAll('.row').forEach(row => {
      row.addEventListener('mouseenter', () => {
        menumoveaudio.play();
      });
      
      row.addEventListener('click', () => {
        menuselectaudio.play();
      });
    });

    let selectedChapter = null;

    document.addEventListener('keydown', function(event) {
      const rows = document.querySelectorAll('.row');

      if (event.key === 'ArrowUp') {
        if (selectedChapter === null) {
          selectedChapter = 0;
        } else {
          selectedChapter--;
          if (selectedChapter < 0) selectedChapter = rows.length - 1;
        }
        rows.forEach(r => r.classList.remove("selected"));
        rows[selectedChapter].classList.add("selected");
        menumoveaudio.play();

      } else if (event.key === 'ArrowDown') {
        if (selectedChapter === null) {
          selectedChapter = 0;
        } else {
          selectedChapter++;
          if (selectedChapter >= rows.length) selectedChapter = 0;
        }
        rows.forEach(r => r.classList.remove("selected"));
        rows[selectedChapter].classList.add("selected");
        menumoveaudio.play();

      } else if (event.key === 'Enter') {
        if (selectedChapter !== null) {
          menuselectaudio.play();
          window.location.href = rows[selectedChapter].href;
        }
      }
    });
  </script>
</body>
</html>
